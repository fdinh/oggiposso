(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RXBc:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r("q1tI"),o=r.n(n),a=r("6xiS"),i=r("SZ+x"),u=r("voE/"),c=r("Bl7J"),l=r("0hfp"),f=r("6aAV"),d=r("VphZ");function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t,r=e.data,g=e.location,m={};r.allRegionsZonesCsv.edges.forEach((function(e,t){m[e.node.Date]=e.node}));var v={};r.allMarkdownRemark.nodes.forEach((function(e,t){v[e.frontmatter.id]=e.html}));var b={};r.allMarkdownRemark.nodes.forEach((function(e,t){b[e.frontmatter.id]=e.frontmatter.label}));var p=new Date,h=p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear(),y={region:null!==(t=localStorage.getItem("region"))&&void 0!==t?t:0,date:h};var w=Object(n.useReducer)((function(e,t){switch(t.type){case"region":return{region:t.region,date:e.date};case"date":return{region:e.region,date:t.date};default:throw new Error}}),y),E=w[0],S=w[1];function k(e,t){return 0!==t&&0!==e?m[e][t]:""}function j(){var e=k(E.date,E.region);return O(E.date)&&""===e&&(e=k(E.date,"Lombardia")),e}function A(){var e=j();if(e)return b[e]}function I(){return 0!==E.date?E.date:""}function O(e){return 2===Object.values(m[e]).filter((function(e,t,r){return r.indexOf(e)===t})).length}o.a.useEffect((function(){0!==E.region&&localStorage.setItem("region",E.region)}),[E]),o.a.useEffect((function(){navigator.geolocation?0===y.region&&(console.log("Locating..."),navigator.geolocation.getCurrentPosition((function(e){for(var t,r=e.coords.latitude,n=e.coords.longitude,o=s(l.feature(f,f.objects.regions).features);!(t=o()).done;){var a=t.value;if(d.a(a,[n,r])){S({type:"region",region:a.properties.reg_name});break}}}),(function(){console.log("Unable to retrieve your location")}))):console.log("Geolocation is not supported by your browser")}),[]);var M;return o.a.createElement(c.a,{location:g},o.a.createElement("form",null,o.a.createElement(i.a,{regions:a.a,state:E,dispatch:S}),o.a.createElement(u.a,{dates:Object.keys(m),state:E,dispatch:S}),o.a.createElement("h2",{className:j()},function(){if(j())return O(E.date)?"Tutte le regioni, "+I()+": "+A():(0!==E.region?a.a[E.region]:"")+", "+I()+": "+A()}()),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(M=j(),M?v[M]:O(E.date)?v[k(E.date,"Lombardia")]:"Per favore scegli una regione e una data.")}})))}}}]);
//# sourceMappingURL=component---src-pages-index-js-b86280a876d3e8d89aa2.js.map