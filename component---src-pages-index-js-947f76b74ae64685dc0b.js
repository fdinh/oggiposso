(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RXBc:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var r=n("q1tI"),o=n.n(r),a=n("6xiS"),i=n("SZ+x"),l=n("voE/"),u=n("Bl7J"),c=n("0hfp"),f=n("6aAV"),d=n("VphZ"),g=n("vrFN");function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.data,n=e.location,m={};t.allRegionsZonesCsv.edges.forEach((function(e,t){m[e.node.Date]=e.node}));var v={};t.allMarkdownRemark.nodes.forEach((function(e,t){v[e.frontmatter.id]=e.html}));var b={};t.allMarkdownRemark.nodes.forEach((function(e,t){b[e.frontmatter.id]=e.frontmatter.label}));var p=new Date,y={region:"0",date:p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear()};var h=Object(r.useReducer)((function(e,t){switch(t.type){case"region":return{region:t.region,date:e.date};case"date":return{region:e.region,date:t.date};default:throw new Error}}),y),w=h[0],E=h[1];function S(e,t){return"0"!==t&&"0"!==e?m[e][t]:""}function I(){var e=S(w.date,w.region);return"0"!==w.date&&A(w.date)&&""===e&&(e=S(w.date,"Lombardia")),e}function k(){var e=I();if(e)return b[e]}function j(){return"0"!==w.date?w.date:""}function A(e){return 2===Object.values(m[e]).filter((function(e,t,n){return n.indexOf(e)===t})).length}return o.a.useEffect((function(){"0"!==w.region&&localStorage.setItem("region",w.region)}),[w]),o.a.useEffect((function(){if(navigator.geolocation){if("0"===w.region){var e,t,n=null!==(e=localStorage.getItem("region"))&&void 0!==e?e:"0",r=null!==(t=localStorage.getItem("avoid_geolocation"))&&void 0!==t?t:"0";"0"===n&&"0"===r?(console.log("Locating..."),navigator.geolocation.getCurrentPosition((function(e){for(var t,n=e.coords.latitude,r=e.coords.longitude,o=s(c.feature(f,f.objects.regions).features);!(t=o()).done;){var a=t.value;if(d.a(a,[r,n])){E({type:"region",region:a.properties.reg_name});break}}}),(function(){console.log("Unable to retrieve your location, will not bother you again"),localStorage.setItem("avoid_geolocation","1")}))):E({type:"region",region:n})}}else console.log("Geolocation is not supported by your browser")}),[]),o.a.createElement(u.a,{location:n},o.a.createElement(g.a,null),o.a.createElement("form",null,o.a.createElement(i.a,{regions:a.a,state:w,dispatch:E}),o.a.createElement(l.a,{dates:Object.keys(m),state:w,dispatch:E}),o.a.createElement("h2",{className:I()},function(){if(I())return A(w.date)?"Tutte le regioni, "+j()+": "+k():("0"!==w.region?a.a[w.region]:"")+", "+j()+": "+k()}()),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:function(){if("0"!==w.date){var e=I();return e?v[e]:A(w.date)?v[S(w.date,"Lombardia")]:"Per favore scegli una regione e una data."}return"Per favore scegli una regione e una data."}()}})))}}}]);
//# sourceMappingURL=component---src-pages-index-js-947f76b74ae64685dc0b.js.map