(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RXBc:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n("q1tI"),o=n.n(r),a=n("6xiS"),i=n("SZ+x"),u=n("voE/"),c=n("Bl7J"),l=n("0hfp"),f=n("6aAV"),d=n("VphZ");function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t,n=e.data,g=e.location,m={};n.allRegionsZonesCsv.edges.forEach((function(e,t){m[e.node.Date]=e.node}));var v={};n.allMarkdownRemark.nodes.forEach((function(e,t){v[e.frontmatter.id]=e.html}));var b={};n.allMarkdownRemark.nodes.forEach((function(e,t){b[e.frontmatter.id]=e.frontmatter.label}));var p=new Date,h=p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear(),y={region:null!==(t=window.localStorage.getItem("region"))&&void 0!==t?t:0,date:h};var w=Object(r.useReducer)((function(e,t){switch(t.type){case"region":return{region:t.region,date:e.date};case"date":return{region:e.region,date:t.date};default:throw new Error}}),y),E=w[0],S=w[1];function k(e,t){return 0!==t&&0!==e?m[e][t]:""}function j(){var e=k(E.date,E.region);return O(E.date)&&""===e&&(e=k(E.date,"Lombardia")),e}function A(){var e=j();if(e)return b[e]}function I(){return 0!==E.date?E.date:""}function O(e){return 2===Object.values(m[e]).filter((function(e,t,n){return n.indexOf(e)===t})).length}o.a.useEffect((function(){0!==E.region&&localStorage.setItem("region",E.region)}),[E]),o.a.useEffect((function(){navigator.geolocation?0===y.region&&(console.log("Locating..."),navigator.geolocation.getCurrentPosition((function(e){for(var t,n=e.coords.latitude,r=e.coords.longitude,o=s(l.feature(f,f.objects.regions).features);!(t=o()).done;){var a=t.value;if(d.a(a,[r,n])){S({type:"region",region:a.properties.reg_name});break}}}),(function(){console.log("Unable to retrieve your location")}))):console.log("Geolocation is not supported by your browser")}),[]);var M;return o.a.createElement(c.a,{location:g},o.a.createElement("form",null,o.a.createElement(i.a,{regions:a.a,state:E,dispatch:S}),o.a.createElement(u.a,{dates:Object.keys(m),state:E,dispatch:S}),o.a.createElement("h2",{className:j()},function(){if(j())return O(E.date)?"Tutte le regioni, "+I()+": "+A():(0!==E.region?a.a[E.region]:"")+", "+I()+": "+A()}()),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(M=j(),M?v[M]:O(E.date)?v[k(E.date,"Lombardia")]:"Per favore scegli una regione e una data.")}})))}}}]);
//# sourceMappingURL=component---src-pages-index-js-401432054f22b6528533.js.map