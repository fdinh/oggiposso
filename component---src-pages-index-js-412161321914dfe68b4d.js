(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RXBc:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r("q1tI"),o=r.n(n),a=r("6xiS"),i=r("SZ+x"),u=r("voE/"),c=r("Bl7J"),l=r("0hfp"),f=r("6aAV"),d=r("VphZ");function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t=e.data,r=e.location,g={};t.allRegionsZonesCsv.edges.forEach((function(e,t){g[e.node.Date]=e.node}));var m={};t.allMarkdownRemark.nodes.forEach((function(e,t){m[e.frontmatter.id]=e.html}));var v={};t.allMarkdownRemark.nodes.forEach((function(e,t){v[e.frontmatter.id]=e.frontmatter.label}));var b=new Date,p={region:0,date:b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()};var y=Object(n.useReducer)((function(e,t){switch(t.type){case"region":return{region:t.region,date:e.date};case"date":return{region:e.region,date:t.date};default:throw new Error}}),p),h=y[0],w=y[1];function E(e,t){return 0!==t&&0!==e?g[e][t]:""}function S(){var e=E(h.date,h.region);return A(h.date)&&""===e&&(e=E(h.date,"Lombardia")),e}function k(){var e=S();if(e)return v[e]}function j(){return 0!==h.date?h.date:""}function A(e){return 2===Object.values(g[e]).filter((function(e,t,r){return r.indexOf(e)===t})).length}o.a.useEffect((function(){0!==h.region&&localStorage.setItem("region",h.region)}),[h]),o.a.useEffect((function(){if(navigator.geolocation){if(0===h.region){var e,t=null!==(e=localStorage.getItem("region"))&&void 0!==e?e:0;0===t?(console.log("Locating..."),navigator.geolocation.getCurrentPosition((function(e){for(var t,r=e.coords.latitude,n=e.coords.longitude,o=s(l.feature(f,f.objects.regions).features);!(t=o()).done;){var a=t.value;if(d.a(a,[n,r])){w({type:"region",region:a.properties.reg_name});break}}}),(function(){console.log("Unable to retrieve your location")}))):w({type:"region",region:t})}}else console.log("Geolocation is not supported by your browser")}),[]);var I;return o.a.createElement(c.a,{location:r},o.a.createElement("form",null,o.a.createElement(i.a,{regions:a.a,state:h,dispatch:w}),o.a.createElement(u.a,{dates:Object.keys(g),state:h,dispatch:w}),o.a.createElement("h2",{className:S()},function(){if(S())return A(h.date)?"Tutte le regioni, "+j()+": "+k():(0!==h.region?a.a[h.region]:"")+", "+j()+": "+k()}()),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(I=S(),I?m[I]:A(h.date)?m[E(h.date,"Lombardia")]:"Per favore scegli una regione e una data.")}})))}}}]);
//# sourceMappingURL=component---src-pages-index-js-412161321914dfe68b4d.js.map