(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RXBc:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n("q1tI"),o=n.n(r),a=n("6xiS"),i=n("SZ+x"),l=n("voE/"),c=n("Bl7J"),u=n("0hfp"),f=n("6aAV"),d=n("VphZ");function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=e.data,n=e.location,s={};t.allRegionsZonesCsv.edges.forEach((function(e,t){s[e.node.Date]=e.node}));var m={};t.allMarkdownRemark.nodes.forEach((function(e,t){m[e.frontmatter.id]=e.html}));var v={};t.allMarkdownRemark.nodes.forEach((function(e,t){v[e.frontmatter.id]=e.frontmatter.label}));var b=new Date,p={region:0,date:b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()};var y=Object(r.useReducer)((function(e,t){switch(t.type){case"region":return{region:t.region,date:e.date};case"date":return{region:e.region,date:t.date};default:throw new Error}}),p),h=y[0],w=y[1];function E(e,t){return 0!==t&&0!==e?s[e][t]:""}function S(){var e=E(h.date,h.region);return j(h.date)&&""===e&&(e=E(h.date,"Lombardia")),e}function I(){var e=S();if(e)return v[e]}function k(){return 0!==h.date?h.date:""}function j(e){return 2===Object.values(s[e]).filter((function(e,t,n){return n.indexOf(e)===t})).length}o.a.useEffect((function(){0!==h.region&&localStorage.setItem("region",h.region)}),[h]),o.a.useEffect((function(){if(navigator.geolocation){if(0===h.region){var e,t,n=null!==(e=localStorage.getItem("region"))&&void 0!==e?e:0,r=null!==(t=localStorage.getItem("avoid_geolocation"))&&void 0!==t?t:"0";0===n&&"0"===r?(console.log("Locating..."),navigator.geolocation.getCurrentPosition((function(e){for(var t,n=e.coords.latitude,r=e.coords.longitude,o=g(u.feature(f,f.objects.regions).features);!(t=o()).done;){var a=t.value;if(d.a(a,[r,n])){w({type:"region",region:a.properties.reg_name});break}}}),(function(){console.log("Unable to retrieve your location, will not bother you again"),localStorage.setItem("avoid_geolocation","1")}))):w({type:"region",region:n})}}else console.log("Geolocation is not supported by your browser")}),[]);var A;return o.a.createElement(c.a,{location:n},o.a.createElement("form",null,o.a.createElement(i.a,{regions:a.a,state:h,dispatch:w}),o.a.createElement(l.a,{dates:Object.keys(s),state:h,dispatch:w}),o.a.createElement("h2",{className:S()},function(){if(S())return j(h.date)?"Tutte le regioni, "+k()+": "+I():(0!==h.region?a.a[h.region]:"")+", "+k()+": "+I()}()),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(A=S(),A?m[A]:j(h.date)?m[E(h.date,"Lombardia")]:"Per favore scegli una regione e una data.")}})))}}}]);
//# sourceMappingURL=component---src-pages-index-js-5c1ab2fff0ce28e1460c.js.map